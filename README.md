## 开源10年 
 项目首发于 **计算机自学平台** 公众号
---
### 关于作者
一个深漂近10年的菜鸟程序员,我愿意分享关于这10年来程序人生中的点点滴滴，若添加好友请备注：**开源10年**
![WechatIMG268.jpeg](https://s2.loli.net/2022/03/22/6SmsB8vZhq2irXR.jpg)
### 关于项目介绍
这个项目是我打算用10年时间来操作维护的一个项目，从微小处入手，一步一步搭建一个大型综合系统，并且我会自己购买服务器和域名让他正常运行起来。其次我会把本项目中所有遇到的知识点都一一罗列出来并进行详解，一是为了让自己印象加深，二是让更多的程序员可以从中获取到点什么。

#### 目录

- 2022-3-22 整理开源代码并于GitHub上分享
- 2022-3-20 Go语言下的Gin详解及Demo实践 [跳转](#4)
- 2022-3-19 Blog项目骨架搭建---Go语言 [跳转](#3)
- 2022-3-18 项目准备工作 [跳转](#2)
- 2022-3-17 《开源十年》项目源自于脑海中的一个想法  [跳转](#1)



###  <a id="jump">《开源十年》项目源自于脑海中的一个想法</a>

​	2022年开年到今天已经过去三个半月了，在今年开始的第一天我看了老罗的《时间的朋友》直播，也购买了大佬的《变量4》。

​	在看这本书的时候，我心里面越看越烦躁，我的烦躁和这本书的内容无关。烦躁的是自己的懦弱和懒惰。何帆老师发愿要用30年的时间为中国的经济立传，至于书的内容怎么样我不做评判，但这种决心让我脸颊发红。

​	毕业至今多少年了，每年伊始都给自己立下各种flag，年底回头一看完成的寥寥无几。每次这个时候都会自己给自己找借口：

​	今年忙。。。

​	今年干那啥事耽误了时间。。。

​	看看身边其他人，自己今年好像也小有成就，flag不flag的随他去吧。。。

​	前年在公司的要求下读了王阳明，去年自发的看了曾国藩。每次在读他们故事的时候就发愿要学做他们这样的圣人，可书放下不久这个愿就随风而逝。

​	每一年好像除了工作和生活，自己从来没有永恒的坚持去做意见有意义的事情。平时不经意间脑海总是会蹦出各种各样的想法，但是后面又都不了了之。

​	前不久在知乎上看到一个问答，说你每天那么拼命的工作赚钱到底是为了什么？下面有人说为了让自己的后代能实现阶层的跨越，当时看到这句话我颇为赞成。但是在这个回答的下面有一个回复，说三代以后你的子孙可能都已经记不住你的名字了。这句话让我陷入了深深的沉思，那我存在的意义到底是什么？我拼搏的意义是什么？

​	日复一日，年复一年。随着年龄的增长，岁月的侵蚀，来自心底的空虚、孤独和焦虑让我不堪其烦。我寻找了很久，这些来自心底的负面情绪到底是怎么出现的？今天在居家办公的第3天，我突然明悟了。原来他们来自我内心的自卑和懒惰，来自我逃避生活的懦弱和懒惰，来自我盲目的自信和浮躁的人品。很多时候我都特别享受来自别人的夸奖和羡慕，殊不知自己这种市井小民的虚荣是多么的可笑和无知。

​	何帆老师要坚持30年写《变量》，那他的目的是什么？为了赚钱么？也许是，但我不这么认为，我觉得他是在记录历史并分享给读者，把每一处节点发生的事情串联起来，让大家更好的了解这段历史并可以从中发现些什么，让读者能更好的理解这段历史的意义从而清晰自己将走的路该怎么规划。

​	所以，我要向何帆老师学习，他用他的方式记录历史并分享给大家。那我就用一段一段的代码讲述程序员存在的意义，让每一位程序员或者想进入这个行业从业的人员能更好的了解每一段代码，并用它来实现自己想要的价值提现。

​	不论未来有多少艰险和困难，我相信我都可以一一克服。从网站的搭建、备案到内容的整理和编辑，一步一个脚印，只希望我把我已走过的路清晰的呈现在读者面前，让每一位读者能从中得到点什么并使读者可以清晰的明白自己未来的路到底该怎么走。

​	我在这本日记的扉页写下“开源十年”，我希望在我未来的这十年能坚持下去，并矢志不渝的保持住这个初心。

​	开源十年这个项目，我将以初学者的态度去做，怎么设计？怎么编程？遇到不会的怎么学习？遇到难题怎么解决？怎么开发？怎么部署？怎么优化？让每一位读者不管是什么级别的程序员都能一眼看懂并理解。此项目纯属实战项目，只需要有编程语言的基础即可。

​	下一步的规划：

​	1、规划项目的功能并拆分为开发需求

​	2、开始编程并在github中开源

​	3、购买服务器部署并备案供每一位读者参阅





## <a id="2">项目启动---先做个BLOG用</a>



昨天迸发了这个想法之后就立刻记录下来并通过**计算机自学平台**这个公众号投了出去，因为目前对我来说最大的阻碍不是技术问题OR精力投入问题，而是能不能坚持下去的问题。

以前也立过很多flag，最后都没有坚持下去。比如：我记单词用的百词斩，每天坚持打卡50个单词，但是在我坚持了173天的时候就断掉了。今天我还认真的去分析了断掉的原因。就是没有形成自我督促，因为断不断都是我自己的事，别人也不知道你坚持了多久，断就断了感觉也无所谓。所以这次我没给自己留一点后路。既然要坚持就逼自己一把，直接投出去把自己在这个圈子的脸面赌出去。如果后面坚持不下去了，也就别打算继续在这个圈子混了。

今天主要做的就是一些准备工作，首先是语言的选择上。后端编程我打算使用Golang，之所以不选择自己最熟悉的JAVA就是因为前面我说过的那句话，我要以初学者的心态去做这个项目。Golang对于我来说虽然不陌生，但毕竟没有正式去承接过大型项目。前端打算选VUE，同理选它是因为我没用过。所以在后面的项目中如果哪位大佬发现我的写法或者用法不对请直接指出。

下面简单说说这个项目吧，昨天只是提出了项目的目的，没有详细说项目的实际内容。其实我也不知道这个项目都有哪些东西，所以我在前面说过，有什么东西大家说了算。我也是想到哪里就写到哪里。总之一个原则，把所有能想到的用法都用代码去实现一遍并寻找更优的解决方案，然后开源供大家参考。

比如说分布式存储，每一步是怎么做的，是怎么实现的海量文件存储的，如何快速访问所存文件，代码怎么编写的等等，我们共同一步一步去实现它。或者更简单点的就是一个注册登录模块是怎么实现的，为了满足各种需求我们还可以怎么扩展等等。由简入繁再拆分细化去实现它。

下面就是开发前的一些准备，

1）下载安装并激活Goland

2）安装MySQL

3）梳理下一阶段的需求

4）设计当前阶段数据库表结构

这一个阶段的工作是实现一个简单的博客功能，后台可以注册登录并编辑文章，前端用来展示文章列表和文章内容。

这个阶段之所以选择实现这么一个功能是因为我想先做个《开源十年》的网站出来，以后这个项目的更新都搬过去，一个真正的从零开始的并正常运行的项目更有说服力。这样一来面向的受众会更多更广泛且不给自己的懒惰留一丁点的退路。

**下面是本阶段的思维导图：**



![img](https://pic3.zhimg.com/80/v2-4a3e0b9b95be4d0c77031e293da53dfa_720w.jpg)



**前端展示分两部分**

1）Web端页面展示

2）H5手机端页面展示

**后端两个模块**

1）账号管理模块

2）文章管理模块（增删查改）

**文章相关数据字段**

标题、内容、作者、创建时间、更新时间

**账号相关数据**

账号、密码、手机号、昵称、创建时间

**目前库表设计**



![img](https://pic1.zhimg.com/80/v2-70616294679c46fca081420f67eeaaa0_720w.jpg)



**功能API设计**

账号注册 v1/account/register

账号登录 v1/account/login

密码修改 v1/account/update

文章列表 v1/blog/list

文章详情 v1/blog/detail

创建文章 v1/blog/create

修改文章 v1/blog/update

一个简单的博客基础骨架就出来了，下一步就是代码的编写了。目前想到的就这些，没有必要在这个阶段纠结太多，项目中很多问题都是在开发过程中发现的，到时候再去一一应对。如果在这个阶段浪费太多时间，就会导致整个项目的难以推进。

好了，暂时更新这么多吧，祝各位晚安！





## <a id="3">Blog项目骨架搭建---Go语言（第一阶段）</a>

今天周六，利用两个多小时的时间把昨天的需求简单梳理了一下，并开始搭建项目，进行了简单的编辑，到目前为止已经实现注册功能了。

这个项目到今天是第三天了，我并不能保证每天都更新日记，但确实每天都会更新项目，时间多久多做点，时间少就少做点，总之这个事情是不可以断的。希望各位也给我助助威，鞭策一下我这颗懒惰的心。

本节主要涉及以下几个知识点：

1）gin web框架

2）viper 配置管理

3）Gorm 数据库连接

这三个知识点我后面单独拉出来介绍，这节仅简单介绍并陈述我都做了什么。

**一、选择Gin框架**

在 Go语言开发的 Web 框架中，有两款著名 Web 框架分别是 Martini 和 Gin，两款 Web 框架相比较的话，Gin 自己说它比 Martini 要强很多。

Gin 是 Go语言写的一个 web 框架，它具有运行速度快，分组的路由器，良好的崩溃捕获和错误处理，非常好的支持中间件和 json。总之在 Go语言开发领域是一款值得好好研究的 Web 框架

gin安装：go get -u [http://github.com/gin-gonic/gin](https://link.zhihu.com/?target=http%3A//github.com/gin-gonic/gin)

本项目中初始化位置：

![img](https://pic4.zhimg.com/80/v2-55427a3d55a310224ef9b225e8e19b33_720w.jpg)

**二、选自viper做配置管理**

viper 是一个配置解决方案，拥有丰富的特性：

- 支持 JSON/TOML/YAML/HCL/envfile/Java properties 等多种格式的配置文件；
- 可以设置监听配置文件的修改，修改时自动加载新的配置；
- 从环境变量、命令行选项和io.Reader中读取配置；
- 从远程配置系统中读取和监听修改，如 etcd/Consul；
- 代码逻辑中显示设置键值。

Viper安装：go get [http://github.com/spf13/viper](https://link.zhihu.com/?target=http%3A//github.com/spf13/viper)

本项目中初始化位置：

![img](https://pic1.zhimg.com/80/v2-69a3df27012e7d4a8c9d86fe13462e4c_720w.jpg)

![img](https://pic4.zhimg.com/80/v2-37fdd5d36f58bd4bd6834e5d55718e5b_720w.jpg)

根据以上代码可知，我的配置文件放下项目路径/config下，文件为：application.yml。

**三、数据库连接使用Gorm库**

gorm是go语言的一个orm框架,具体的原理及思想我也介绍不清楚，你只需要知道它是你操作数据库的桥梁即可、

Gorm安装：go get -u [http://github.com/jinzhu/gorm](https://link.zhihu.com/?target=http%3A//github.com/jinzhu/gorm)

本项目中初始化位置：

![img](https://pic2.zhimg.com/80/v2-9d5fcd6309a98e28275899295092fd5d_720w.jpg)

![img](https://pic2.zhimg.com/80/v2-7b48b6ed55166ffcfe9c3f16dd1105ed_720w.jpg)

上图中的viper.GetString("datasource.driverName")就是利用前面说过的配置管理viper去配置文件中获取相对应的参数。

具体的配置文件如下：

![img](https://pic1.zhimg.com/80/v2-86b3083dfe913f9c73df4547c613a7c4_720w.jpg)

这里留一个小彩蛋，只有在真正运行项目的时候才会发现哦

**四、创建数据模型**

一共创建了两个数据模型

![img](https://pic2.zhimg.com/80/v2-d08876977c311cd726cefe9d24d12225_720w.jpg)

![img](https://pic2.zhimg.com/80/v2-e4749fcf00652bd4579e6b38213a3fb9_720w.jpg)

这里一共设计到三个知识点

1）gorm.Model这个标记一个结构中有一个结构中没有，那他是用来干什么的呢？其实这就相当于是继承，加上这个后就相当于继承了Model，不加这个代表不继承Model。而Model结构中有以下四个定义好的字段：

![img](https://pic2.zhimg.com/80/v2-5a22f68ffcd8adf236cffa6de1e82ce9_720w.jpg)

这是Gorm自带的，所以你清楚这一点就行了。

2）上面Article结构体中有一个uuid.UUID标记，这个是哪里来的？其实是引用自：

uuid"[http://github.com/satori/go.uuid](https://link.zhihu.com/?target=http%3A//github.com/satori/go.uuid)"

它的主要功能就是在实际项目中，经常会使用到一个唯一标识的，比如唯一标识一条记录等情况，这个go.uuid项目库就是干这个事情的。

3）在上面Article结构体中还有一个非自带类型：Time，这个是自定义的，其作用就是把时间格式化了而已。如果不格式化的话，它显示的就是时间戳，这个大家应该都知道吧？所以它就是让我们能更方便的查看时间。

**五、写了一个接口**

账号注册 v1/account/register

![img](https://pic1.zhimg.com/80/v2-ce76f08369772220496c42bbdc9b59a4_720w.jpg)

这节就先开这一个接口吧，点到为止。贪多贪快嚼不烂，我们的目的是掌握开发过程中出现的各个知识点，并不是完成功能的开发。所以大家不要慌尽量把这节的内容摸透咽下去再进行下一步的开发。

下一节安排：

1、Go 项目实战 之 Gin框架的详解

2、Go 项目实战 之 配件管理viper 详解

3、Go 项目实战 之 数据库连接Grom详解

这个项目到目前为止，基本上骨架就出来了，当然项目本身问题还是很多的，我们会在后面一步一步去完善，为的就是在完善中学习。直接一步到位的框架设计只会在外包项目中出现，我们又不赶进度，慢慢来哈。





## <a id="4">Go语言下的Gin详解及Demo实践</a>

今天没有去继续更新开源10年的项目，因为昨天接触到几个新的知识点，所以今天加强一下对他们的认识，下面是本节的一个知识点。

1）Gin Web框架的认识

2）Gin加载静态资源

3）Gin加载动态资源

在学习Gin的过程中动手搞了一个小Demo，把Gin的简单用发都跑了一下，强烈建议各位读者不要只看文章，自己动手写一下效果更佳。

项目在GitHub上的地址：[https://github.com/kaiyuan10nian/GinDemo](https://link.zhihu.com/?target=https%3A//github.com/kaiyuan10nian/GinDemo)

在开始这一节前，希望有兴趣的同学可以先去看下这个开源10年项目前面的故事，虽不会直接提升你的开发能力，但看后确实能了解这个项目的灵魂。

1、[开源10年项目-项目成立，欢迎大家的加入](https://zhuanlan.zhihu.com/p/483008113)

2、[开源10年项目-准备工作，语言的选择和第一阶段的目标](https://zhuanlan.zhihu.com/p/483459598)

3、[开源10年项目-Go项目实战之博客功能开发](https://zhuanlan.zhihu.com/p/483854593)

下面开始我们今天的知识点分享。

一、创建一个Go web项目，这里我命名为：GinDemo，方便我们的学习。

项目结构

![img](https://pic4.zhimg.com/80/v2-e348197212d67e1a12cb7e024000d053_720w.jpg)

Gin安装：go get -u [http://github.com/gin-gonic/gin](https://link.zhihu.com/?target=http%3A//github.com/gin-gonic/gin)

直接在Goland下面的Terminal中输入就可以了。看到下图就表示你安装成功了

![img](https://pic4.zhimg.com/80/v2-1424c34bf85b347ed21d21e8f93a572b_720w.jpg)

二、先写一个小案例，并在Postman或者浏览器中打开看下效果。

在GinDemo下面创建一个main.go文件，输入以下内容：

![img](https://pic2.zhimg.com/80/v2-da8f3583ed46a2b7301de6cd7279c471_720w.jpg)

然后在下面的Termonal中输入以下指令运行该项目：

Go run main.go

看到下图即表示你已经运行起来了。

![img](https://pic3.zhimg.com/80/v2-8ce43416c230aa18159f8a8059cfc3b6_720w.jpg)

这个时候，打开你的浏览器，输入：localhost:8080/ping,将显示以下内容：

![img](https://pic4.zhimg.com/80/v2-faefae54729a836ba403d187b8ff2c7b_720w.jpg)

整个Demo中的注释还是比较清楚的，每一行代码是什么意思，有什么作用等都比较简单，运行到这里基本上Gin的精髓就已经学到了。

下面两个知识点是可以解决我们在真正的实际项目中经常会遇到的需求的。所以我这里单独拉了出来写一下。当然，它还有其它别的更多用法，我们就不一一说了，至少掌握了这两个对于普通的开发工作就足以应对了。

三、加载静态资源

在实际项目中我们经常会用到很多静态资源，比如：图片、文件等。那Gin是怎么处理的呢？还是看案例，下面我们对上面的main.go进行一下简单修改：

![img](https://pic2.zhimg.com/80/v2-33dc491bd60886def79d33e3d2b6e1e1_720w.jpg)

主要加了两行代码，用到两个函数。注释中已经描述的很清楚了，说一下代码中未描述的内容，非常重要，这两个函数的第一个参数就是相对地址，也就是说是用户端访问的时候访问的地址，第二个参数是本地服务器的地址，也就是引用的地址。

比如我们运行上面项目后，若想访问/Users/fu/GolandProjects/GinDemo/web/static里面的图片，那么直接如下操作即可：

![img](https://pic3.zhimg.com/80/v2-6ddc155caafbdca35df8f7bd6462938e_720w.jpg)

若想加载第二种加载形式的，则直接这么访问：

![img](https://pic1.zhimg.com/80/v2-ee6f5f357df3e6e5828b2276d705db3c_720w.jpg)

其实，这两种访问形式访问的都是同一张图片。

这就是静态加载资源的方式方法，那么我们做一个web站点肯定不是仅仅有静态资源，肯定还有动态资源，动态资源的加载怎么实现？

四、加载动态资源

首先，在GinDemo-web下新建templete并在其中新增一个index.html文件，文件内容很简单，这里制作演示所以就没有去做接口互动。

![img](https://pic4.zhimg.com/80/v2-8c450de1340e43c72fc1c9cf84dfd963_720w.jpg)

然后，在根目录下创建了controller文件夹并创建con.go，主要用来存放逻辑层的操作，受JAVA开发的影响我这么去做了，你可以随意哈，怎么高兴怎么来。

![img](https://pic2.zhimg.com/80/v2-69c4988cfa34759d472d8a883f0f7b79_720w.jpg)

还是在main.go中做修改,并加载trmplete下面的资源，然后做了一个web分组，分组中仅有一个接口，其处理放到了con.go文件中的IndexController函数中。

![img](https://pic3.zhimg.com/80/v2-fb6809244ff085d3c8cb2ca599f35fda_720w.jpg)

直接运行，然后浏览器中访问index.html看看有什么效果？

![img](https://pic1.zhimg.com/80/v2-93e4ebd52e4940966c9b330d2e3f0570_720w.jpg)

到这里，其实这个项目就算完成了，其中涉及到的知识点我们也都了解了，就这些内容已经完全够现阶段的我们使用了。

拜拜。。。See you next.